<form [formGroup]="form">

  <div class="flex flex-row justify-between place-items-stretch md:w-max gap-2 items-start">
    <div class="flex-grow">
      <label>Product:</label>
      <select formControlName="product" class="w-full">
        <option [ngValue]="null">...</option>
        <option *ngFor="let item of products" [ngValue]="item">
          {{item.id}}
        </option>
      </select>
    </div>

    <div class="flex-shrink">
      <label>Price:</label>
      <input type="text" formControlName="price" class="w-full">
    </div>
    <div class="flex-shrink">
      <label>Size:</label>
      <input type="text" formControlName="size" class="w-full">
    </div>
    <div>
      <label>&nbsp;</label>
      <button mat-flat-button color="primary"
              [disabled]="form.invalid"
              (click)="add()">
        <span>OBSERVE</span>
      </button>
    </div>
  </div>

</form>


<table class="border-collapse bg-transparent min-w-full divide-y divide-gray-200 text-xs">
<tbody class="divide-y divide-gray-200">
  <tr *ngFor="let item of observer; let i = index">
    <td class="px-0">
      <strong>{{item.product.id}}</strong>
      <div *ngIf="item.size">
        {{item.size}}
      </div>
    </td>
    <td class="px-2 text-right">
      {{item.price}}
      <div *ngIf="item.size">
        <small>{{oldFunds(item)}}</small>
      </div>
    </td>
    <td class="px-2 text-right">
      {{prices[item.product.id]}}
      <div *ngIf="item.size">
        <small>{{newFunds(item)}}</small>
      </div>
    </td>
    <td  class="px-2 text-right" [style.color]="getPriceColor(item)">
      <strong>{{diff(item.price, prices[item.product.id])}}% ({{earn(item.price, prices[item.product.id])}})</strong><br>
      <div *ngIf="item.size">
        <small>{{earn(oldFunds(item), newFunds(item))}}</small>
      </div>
    </td>
    <td class="px-0 text-right">
      <button mat-icon-button color="warn" (click)="remove(i)">
        <mat-icon>remove_circle_outline</mat-icon>
      </button>
    </td>
  </tr>
</tbody>
</table>

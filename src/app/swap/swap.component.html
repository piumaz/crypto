
<form [formGroup]="form">
  <div>
    <mat-radio-group formControlName="type" class="flex flex-row gap-4">
      <mat-radio-button value="swap">Swap</mat-radio-button>
      <mat-radio-button value="sell">Sell</mat-radio-button>
      <mat-radio-button value="buy">Buy</mat-radio-button>
    </mat-radio-group>
  </div>

  <div class="flex flex-row justify-between place-items-stretch md:w-max gap-2 items-end">
    <div *ngIf="form.controls.type.value !== 'buy'" class="flex-grow">
      <label>Sell:</label>
      <select formControlName="sell" class="w-full">
        <option [ngValue]="null">...</option>
        <option *ngFor="let item of getProductsSell()" [ngValue]="item">
          {{item.id}}
        </option>
      </select>
      <p>
        <small *ngIf="form.controls.sell.value as productSell">
          <strong>{{productSell.base_currency}}</strong>
          Min: {{productSell.base_min_size}} - Increment: {{productSell.base_increment}}
        </small>
      </p>
    </div>
    <div *ngIf="form.controls.type.value !== 'sell'" class="flex-grow">
      <label>Buy:</label>
      <select formControlName="buy" class="w-full">
        <option [ngValue]="null">...</option>
        <option *ngFor="let item of getProductsBuy()" [ngValue]="item">
          {{item.id}}
        </option>
      </select>
      <p>
        <small *ngIf="form.controls.buy.value as productBuy">
          <strong>{{productBuy.base_currency}}</strong>
          Min: {{productBuy.base_min_size}} - Increment: {{productBuy.base_increment}}
        </small>
      </p>
    </div>

    <div class="flex-shrink">
      <label>Size:</label>
      <input type="text" formControlName="size" class="w-full">
      <p>
        <ng-container *ngIf="form.controls.type.value !== 'buy'">
          <small *ngIf="form.controls.sell.value as productSell">
            <strong>{{productSell.base_currency}}</strong>
            Available: {{getAccountAvailable(productSell.base_currency)}}
          </small>
        </ng-container>

        <ng-container *ngIf="form.controls.type.value === 'buy'">
          <small *ngIf="form.controls.buy.value as productBuy">
            <strong>{{productBuy.base_currency}}</strong>
            Available: {{getAccountAvailable(productBuy.base_currency)}}
          </small>
        </ng-container>
      </p>
    </div>

    <div>
      <button mat-flat-button color="primary"
        [disabled]="form.invalid"
        (click)="confirm()">
        <span *ngIf="form.controls.type.value === 'swap'">SWAP</span>
        <span *ngIf="form.controls.type.value === 'sell'">SELL</span>
        <span *ngIf="form.controls.type.value === 'buy'">BUY</span>
      </button>
      <p></p>
    </div>
  </div>

</form>


